<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tu Carnet Digital</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="img/icon.png" type="image/png" />
</head>
<body>
  <div class="container">
    <h1>Tu Carnet Digital</h1>
    <p><strong>¿NO TIENES CONEXIÓN?</strong> Descarga y muestra tu carnet.</p>
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhXPwto2u4Uiq5ZTuipljjnKn3d8KbnIbQVLJcM5oycIPsdd5sFa7NUcOTvbYN5qZk0Qck59VVaY3pQ36kVBUP3cQYwNiE908xcJpXt_eU48QvxmIrtJ7ADF_D0RwkVJ88t8xoRHNZvVZiV2Q0pmANSGpljezXR9a0ocGTtHwBYmKIumdBgbiN1zWJyS9Ke/s1600/pagina_completa%20%281%29.png" alt="Carnet" class="responsive-img" />
    <a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEitt9EUc9as4lGc2smQomU8Ioxrfki7XGL9bvi34uA_8KH314gcj3l6GcSM5FVuhu4jTsZy6t_jSPzLCI_9KWzjACrF-JUouw8V-s8huUgyKivhU-9Jhih5hACrLq6pxyInvOyfSilTW_otTmJ7ZRNuoIvocxvnLTuUFC-DB30nGqtrh3s9iQkUwMa67Kjv/s1600/pagina_completa%20%2811%29.png" download class="download-btn">Descargar Carnet</a>
    <p class="nota">Puedes instalar esta página como app. Funciona sin conexión.</p>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').then(() => {
        console.log('Service Worker registrado');
      });
    }
  </script>

 <style>
  #pwaTip {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #ffffff; /* FONDO BLANCO */
    padding: 12px 15px;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.08);
    display: none;
    z-index: 10;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    border-top: 1px solid #eee;
    animation: slideUp 0.20s ease-out;
  }

  .pwa-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 100%;
    margin: 0 auto;
    position: relative;
  }

  .pwa-content {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-grow: 1;
  }

  .pwa-icon {
    width: 40px;
    height: 40px;
    object-fit: contain;
    flex-shrink: 0;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px; /* BORDES REDONDEADOS */
    padding: 4px;
  }

  .tip-text {
    color: #000; /* TEXTO NEGRO */
    font-size: 14px;
    line-height: 1.3;
    flex-grow: 1;
  }

  #installBtn {
    background: #74915b; /* AZUL CHROME */
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
    flex-shrink: 0;
    min-width: 140px;
  }

  .close-btn {
    position: absolute;
    top: -55px;
    right: 13px;
    background: #FFCDD2;
    border: 1px solid #eee;
    color: #000;
    font-size: 18px;
    cursor: pointer;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.0s;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
    z-index: 1000;
  }

  .close-btn:hover {
    color: #f44336;
    border-color: #f44336;
    transform: rotate(90deg) scale(1.2);
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }

  @media (max-width: 480px) {
    .pwa-content {
      gap: 8px;
    }
    .tip-text {
      font-size: 13px;
    }
    #installBtn {
      padding: 8px 15px;
      font-size: 13px;
      min-width: 120px;
    }
    .pwa-icon {
      width: 46px;
      height: 46px;
    }
    .close-btn {
      top: -25px;
      right: 15px;
    }
  }
</style>

<div id="pwaTip">
  <div class="pwa-banner">
    <div class="pwa-content">
      <img alt="App Icon" class="pwa-icon" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiDQ17rpDz9FK6Kgn3lQ2K1_R5o9brPkhtY9U5X0Ma8YyejvN-z3VDFGnHU6ocIuIVX0ANQ9tIN5ExYlPSgF3reNaiQg926Ie8qiHTBd1RhTcmEuWYKtQJjD5YobUY2fzNIsmiTQzxJsZt8BmWSO76ziQoB9lzkvE0ed8rnzZ-836B4dWMyogofSwh8MZgJ/s1600/Dise%C3%B1o%20sin%20t%C3%ADtulo%20%2845%29.png"/>
      <div class="tip-text">Para una mejor experiencia</div>
    </div>
    <button id="installBtn">
      <i class="fas fa-mobile-alt"></i>
      INSTALAR APP
    </button>
    <button class="close-btn" id="closeTip">&#215;</button>
  </div>
</div>

<script>
  let deferredPrompt;

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    if (localStorage.getItem('pwaTipClosed') !== 'true') {
      document.getElementById('pwaTip').style.display = 'block';
    }
  });

  document.getElementById('installBtn').addEventListener('click', () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          document.getElementById('pwaTip').style.display = 'none';
        }
        deferredPrompt = null;
      });
    }
  });

  document.getElementById('closeTip').addEventListener('click', () => {
    document.getElementById('pwaTip').style.display = 'none';
    localStorage.setItem('pwaTipClosed', 'true');
  });

  window.addEventListener('appinstalled', () => {
    document.getElementById('pwaTip').style.display = 'none';
  });

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
      .then(reg => console.log('✅ SW registrado'))
      .catch(err => console.error('❌ Error SW:', err));
  }
</script>

  
</body>
</html>
